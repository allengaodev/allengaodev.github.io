<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="preconnect" href="https://cdn.jsdelivr.net" />
  <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" />
    <meta name="description" content="Docker Certified Associate(DCA)&#x8A8D;&#x8B49;&#x76F8;&#x95DC;&#x8CC7;&#x6E90;&#x3001;Docker Images">

  <title>Gao.Dev - &#x4E3B;&#x8981;&#x5BEB;&#x4E00;&#x4E9B;&#x6709;&#x95DC;.Net&#x7684;&#x7B46;&#x8A18;&#x8207;&#x6E2C;&#x8A66;&#x7D50;&#x679C;</title>


  <link rel="canonical" href='https://blog.allengaodev.com/posts/dca-imagebasic'>

      <link type="application/rss+xml" rel="alternate" title="&#x958B;&#x767C;&#x7A7A;&#x9593;" href="/feed.rss" />
      <link type="application/atom+xml" rel="alternate" title="&#x958B;&#x767C;&#x7A7A;&#x9593;" href="/feed.atom" />

  <meta name="application-name" content='Gao.Dev' />
  <meta name="msapplication-tooltip" content='Gao.Dev' />
  <meta name="msapplication-starturl" content='/' />
  <meta name="google-site-verification" content="aq71qXzppLuXZ8be8mjOwn_zJq317ZSD34yTS4i6y6M" />
  <meta property="og:title" content='Gao.Dev - &#x4E3B;&#x8981;&#x5BEB;&#x4E00;&#x4E9B;&#x6709;&#x95DC;.Net&#x7684;&#x7B46;&#x8A18;&#x8207;&#x6E2C;&#x8A66;&#x7D50;&#x679C;' />
  <meta property="og:type" content="website" />
  <meta property="og:url" content='https://blog.allengaodev.com/posts/dca-imagebasic' />

  <link rel="icon" href='/favicon.ico'>

  <!-- Custom fonts for this template
  <link href="https://cdn.jsdelivr.net/gh/allengaodev/allengaodev.github.io@main/vendor/fontawesome-free/css/allv1.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" data-no-mirror>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" data-no-mirror>
  -->
  <!-- Styles for this template (also includes Bootstrap) -->
  <link rel="preload" as="style" href="https://cdn.jsdelivr.net/gh/allengaodev/allengaodev.github.io@main/scss/clean-blog.css" />
  <link href="https://cdn.jsdelivr.net/gh/allengaodev/allengaodev.github.io@main/scss/clean-blog.css" rel="stylesheet" media="screen" onload="this.media='all'">
  <script async src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-core.min.js"></script>
  <script async src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js" data-no-mirror></script>
  <script defer src="https://cdn.jsdelivr.net/npm/quicklink@2.3.0/dist/quicklink.umd.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism.min.css" rel="stylesheet" media="print" onload="this.media='all'">
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-EBB8LGKD99"></script>
  <script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'G-EBB8LGKD99');</script>

  <!--
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5291595453969856" crossorigin="anonymous"></script>
  -->
  


  

</head>

<body>

  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href='/'>Gao.Dev</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      Menu
      <i class="fas fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ms-auto">
          <li class="nav-item">
    <a class="nav-link" href="/posts">Posts</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="/tags">Tags</a>
  </li>

      </ul>
    </div>
  </div>
</nav>


  <!-- Page Header -->
  <header class="masthead no-image">
  <div class="container position-relative">
    <div class="row">
      <div class="col-md-12">
        <div class='post-heading'>
          <h1>
            <a style="color:white" href='https://blog.allengaodev.com'>Docker Certified Associate(DCA)&#x8A8D;&#x8B49;&#x8003;&#x8A66;&#x5B78;&#x7FD2;-Docker Images</a>
              <span class="subheading">Docker Certified Associate(DCA)&#x8A8D;&#x8B49;&#x76F8;&#x95DC;&#x8CC7;&#x6E90;&#x3001;Docker Images</span>
          </h1>
            <div class="meta">Published on Sunday, February 12, 2023</div>
              <div class="mt-3">
                  <a href="/tags/docker" class="badge text-bg-light"> Docker</a>
                  <a href="/tags/dca" class="badge text-bg-light"> DCA</a>
              </div>
        </div>
      </div>
    </div>
  </div>
</header>


  <!-- Main Content -->
  <div class="container">
    <div class="row">
      <div id="content" class="col-md-12">
        <h1 id="docker-images">Docker Images</h1>
<p>在第一篇的文章中: <a href="https://allengaodev.github.io/posts/dca-prepareguide" target="_blank">Docker Certified Associate(DCA)認證考試學習-準備環境</a>
我們運行了以下命令</p>
<pre><code>docker run hello-world
</code></pre>
<p>從字面上看只能知道我們請Docker運行一個叫做hello-world的東西，然後終端機就輸出文字了，那麼背後到底做了什麼呢?<br />
先來讀看看<a href="https://docs.docker.com/engine/reference/commandline/run/" target="_blank">docker run</a>文檔，開頭就說明了此命令的用途</p>
<p><strong>從image建立並執行成一個新的container</strong></p>
<p>並且得出以下幾個重點</p>
<ul>
<li>docker run 有一個必填項 IMAGE</li>
<li>docker 會在image之上建立一個可讀寫層</li>
<li>可以使用docker api <code>/containers/create</code> 和 <code>/containers/(id)/start</code> 也能達成同樣效果</li>
<li>可以使用docker start 來執行停止狀態中的container</li>
<li>可以使用docker ps -a 列出所有狀態的container</li>
</ul>
<p>有了以上資訊我們現在瞭解hello-world就是一個image，<br />
所以完整的動作就是我們請Docker透過使用名稱叫做hello-world的image建立一個新的container，如果找不到image就去網路上下載<br />
那麼我們接下來到docker hub上看看hello-world image
<img src="https://drive.google.com/uc?id=1-24gGpGYl6n0dkYDS7tyDsfxKukxLHAq" alt="DCAImageBasic-dockerhub-helloworld" class="img-fluid"></p>
<p>到docker hub一搜尋hello-world，怎麼出現這麼多結果而且名字也都是一樣，那麼docker是怎麼知道該下載哪一個image呢?<br />
首先可以看出image有四種等級分類:</p>
<ul>
<li>Docker Official Image  #Docker官方推出的一系列Image，由官方維護</li>
<li>Verified Publisher #Docker官方認可的第三方Image，後續由各發布廠商維護</li>
<li>Sponsored OSS #Docker官方贊助的開源專案，後續由官方贊助的開源團隊進行維護</li>
<li>無認證 #由一般使用者自行發布的Image</li>
</ul>
<p>為什麼需要分這些等級呢?<br />
是因為經常有駭客會自行發布惡意的image來誘騙使用者進行下載，如果不注意的話可能自己的主機會變成別人挖礦的節點<br />
所以有著官方認可的image可以視為相對安全，我們一般使用者可以放心下載。</p>
<p>有了以上知識後可以辨別出image的名稱有兩種格式</p>
<ul>
<li>hello-world</li>
<li>rancher/hello-world</li>
</ul>
<p>這是因為某些常用的名稱為了避免重複，所以每個image發布前都要在名稱前加上自己的帳號，不過官方的帳號不再此限制之中</p>
<p>也就是說我們一開始運行的命令，其實呢就是暗指官方發布的image這樣就不會跟其他人發布的搞混了</p>
<pre><code class="language-text">docker run hello-world
</code></pre>
<p>接下來我們點進官方image看看有什麼內容
<img src="https://drive.google.com/uc?id=1ov5EYhnKIQh1KPe8FHyHW_TBHPuvTP_S" alt="DCAImageBasic-helloworld-offical" class="img-fluid">
主要有以下重點</p>
<ul>
<li>docker pull 範例</li>
<li>docker Tags</li>
<li>說明image裡面包了什麼內容</li>
</ul>
<p>需要注意tag的部分，像我們上方的命令直接run hello-world，沒有指定版本預設會是抓最新latest版本</p>
<p>但這是不好的習慣，比較好的做法需要在image最後面明確指定tag，大部分的image都會使用tag作為發布版本的基準，所以要保持指定版本的習慣
例如以下範例我們去下載名為alpine的image</p>
<pre><code class="language-text">docker pull alpine:3.15
docker pull alpine:3.16
docker pull alpine:3.17
</code></pre>
<p>這個範例就是有指定版本，如果不指定版本直接使用預設最新latest版本，短時間可能不會有問題，但時間長了可能會有不相容的問題產生<br />
假設現在最新latest版本的alpine是3.17，但是因為程式會一直改版所以幾個月後alpine可能就到了3.18<br />
之後維護者會把latest版本會變成3.18，這時如果你有一些只兼容3.17的程式就會造成問題，所以指定版本是最好的做法</p>
<h2 id="hello-world-image-github">hello-world image Github</h2>
<p>因為hello-world image是開源的所以我們可以上去Github大概看看
為甚麼運行之後終端機會輸出文字，看看它背後的原理是什麼<a href="https://github.com/docker-library/hello-world" target="_blank">Github</a></p>
<p>可以看到倉庫主要是根據架構做分類，但主要就兩個文件<code>Dockerfile</code>和<code>hello</code>
在github上我們可以直接查看Dockerfile裡面的內容只有三行，hello為一個可執行檔</p>
<pre><code class="language-text">FROM scratch
COPY hello /
CMD [&quot;/hello&quot;]
</code></pre>
<p>從以上內容可以從字面上大概猜出意思</p>
<ul>
<li>Dockerfile使用了scratch當底層</li>
<li>然後複製hello執行檔到根目錄</li>
<li>最後執行一段命令</li>
</ul>
<p>也就是說底層可以想像是我們的電腦，然後我們從某個地方得到一個執行檔，最後運行此執行檔<br />
這兩邊的行為應該會輸出同樣的結果才對，那我們來試試看
首先我們在play with docker建立一台機器，之後把倉庫clone下來</p>
<pre><code class="language-text">git clone https://github.com/docker-library/hello-world
cp hello-world/amd64/hello-world/hello /
/hello
</code></pre>
<pre><code class="language-text">Hello from Docker!
This message shows that your installation appears to be working correctly.

To generate this message, Docker took the following steps:
 1. The Docker client contacted the Docker daemon.
 2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.
    (amd64)
 3. The Docker daemon created a new container from that image which runs the
    executable that produces the output you are currently reading.
 4. The Docker daemon streamed that output to the Docker client, which sent it
    to your terminal.

To try something more ambitious, you can run an Ubuntu container with:
 $ docker run -it ubuntu bash

Share images, automate workflows, and more with a free Docker ID:
 https://hub.docker.com/

For more examples and ideas, visit:
 https://docs.docker.com/get-started/
</code></pre>
<p>確實跟預計的一樣終端機輸出了與container一樣的內容，所以可以把Dockerfile想像成一段腳本，其實跟我們手動操作並無兩樣</p>
<h1 id="summary">Summary</h1>
<p>今天瞭解了docker hub該怎麼使用以及為甚麼要使用tags，並且大略瞭解Dockerfile的操作邏輯，之後幾篇再來詳細深入瞭解</p>


        

      </div>
    </div>
  <div id="comments-container" class="row">
    <!--<div class="likecoin-embed likecoin-button" data-liker-id="allengaodev" data-href='https://blog.allengaodev.com/posts/dca-imagebasic'></div>
 <script src="https://static.like.co/sdk/v1/button.js"></script> -->

<script src="https://giscus.app/client.js"
        data-repo='allengaodev/allengaodev.github.io'
        data-repo-id='R_kgDOI6sF8g'
        data-category-id='DIC_kwDOI6sF8s4CUbuw'
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="light"
        data-lang="en"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
</script>

  </div>
  </div>

  <hr>

  <!-- Footer -->
  <footer>
  <div class="container">
    <div class="row">
      <div class="col-md-12 text-center">
          <p class="text-center small text-muted">Originally published at <a href='https://blog.allengaodev.com'> blog.allengaodev.com</a>.</p>
          <br />
        <p class="copyright">&#xA9; Allen Gao 2023</p>

      </div>
    </div>
  </div>
</footer>


  <!-- Scripts -->
  <script async src="https://cdn.jsdelivr.net/gh/allengaodev/allengaodev.github.io@main/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script async src='/vendor/startbootstrap-clean-blog/js/scripts.js'></script>
  <script defer src='/js/clean-blog.js'></script>
  

  

</body>

</html>
